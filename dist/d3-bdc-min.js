var renderXaxis;renderXaxis=function(t,r,a){var e;return e=d3.svg.axis().scale(t).orient("bottom").ticks(a.length).tickFormat(function(t,e,n){var o;if(null!=a[e])return null!=r.startLabel&&0===e?r.startLabel:null!=r.endLabel&&e===a.length-1?r.endLabel:(o=d3.time.format(r.dateFormat))(a[e].date)})};var config,renderBDC;config={containerId:"#bdcgraph",width:900,height:500,margins:{top:20,right:70,bottom:30,left:50},colors:{standard:"#D93F8E",done:"#5AA6CB",good:"#97D17A",bad:"#FA6E69",labels:"#113F59"},startLabel:"Start",endLabel:"Ceremony",dateFormat:"%A",shortDateFormat:"%d/%m",xTitle:"Daily meetings",yScaleOrient:"left",dotRadius:4,standardStrokeWidth:2,doneStrokeWidth:2,goodSuffix:" :)",badSuffix:" :("},renderBDC=function(t,r){var a,e,n,o,l,i,d,s,c,u,f,g,h,p,m,x;return s=t[0],u=t[t.length-1],c=u.standard,f=d3.max(t,function(t){return t.done||0}),l=d3.select(r.containerId),l.select("*").remove(),h=d3.scale.linear().domain([0,t.length]).range([0,r.width]),m=d3.scale.linear().domain([Math.min(0,c-f),c]).range([r.height,0]),g=d3.svg.line().x(function(t,r){return h(r)}).y(function(t){return m(c-t.standard)}),a=d3.svg.line().x(function(t,r){return h(r)}).y(function(t){return m(c-t.done)}),p=renderXaxis(h,r,t),x=d3.svg.axis().scale(m).orient(r.yScaleOrient).innerTickSize(-r.width).outerTickSize(0),i=l.append("svg").attr("class","chart").attr("width",r.width+r.margins.left+r.margins.right).attr("height",r.height+r.margins.top+r.margins.bottom).append("g").attr("transform","translate("+r.margins.left+","+r.margins.top+")").attr("font-size","small"),i.append("defs").append("marker").attr("id","arrowhead").attr("markerWidth","12").attr("markerHeight","12").attr("viewBox","-6 -6 12 12").attr("refX","-2").attr("refY","0").attr("markerUnits","strokeWidth").attr("orient","auto").append("polygon").attr("points","-2,0 -5,5 5,0 -5,-5").attr("fill",r.colors.standard).attr("stroke","#666").attr("stroke-width","1px"),e=function(t){return t.selectAll("line").attr("marker-end",function(t,r){return r>0?void 0:"url(#arrowhead)"})},n=function(a){return function(e){var n,o;return o=function(t,r,a){var e,n,o;return e=a.width/r,o=t.selectAll("text"),n=0,o.each(function(t){var r;return r=d3.select(this).node().getBBox().width,r>n?n=r:void 0}),n>=e},(n=function(){return o(e,t.length,r)&&(a=a.tickFormat(function(r,a,e){var n;if(null!=t[a])return null!=config.startLabel&&0===a?config.startLabel:null!=config.endLabel&&a===t.length-1?config.endLabel:(n=d3.time.format(config.shortDateFormat))(t[a].date)}))(e),o(e,t.length,r)&&(a.tickFormat(function(r,a,e){var n;if(null!=t[a]&&a%2!==0)return null!=config.startLabel&&0===a?config.startLabel:null!=config.endLabel&&a===t.length-1?config.endLabel:(n=d3.time.format(config.shortDateFormat))(t[a].date)}),a(e)),e.selectAll("text").attr("fill",r.colors.labels).attr("transform","translate(0, 6)"),o(e,t.length/2,r)?e.selectAll("text").attr("transform","translate(-5, 6) rotate(-30)"):void 0})()}},o=function(t){},i.append("g").attr("class","x axis").attr("transform","translate(0,"+r.height+")").call(p).call(n(p)).append("text").attr("class","daily").attr("fill",r.colors.labels).attr("font-weight","bold").attr("transform","translate("+r.width+", 25)").attr("x",20).style("text-anchor","end").text(r.xTitle),i.append("g").attr("class","y axis").call(x).call(o).call(e),i.selectAll(".axis path, .axis line").attr("fill","none").attr("stroke","rgba(0, 1, 0, 0.2)").attr("color","rgba(0, 1, 0, 0.5)").attr("shape-rendering","crispEdges"),i.append("path").attr("class","standard").attr("d",g(t)).attr("stroke",r.colors.standard).attr("stroke-width",r.standardStrokeWidth).attr("stroke-dasharray","10 5").attr("fill","none"),i.append("path").attr("class","done-line").attr("d",a(function(){var r,a,e;for(e=[],r=0,a=t.length;a>r;r++)d=t[r],null!=d.done&&e.push(d);return e}())).attr("stroke",r.colors.done).attr("stroke-width",r.doneStrokeWidth).attr("fill","none"),i.selectAll("circle .standard-point").data(t).enter().append("circle").attr("class","standard-point").attr("cx",function(t,r){return h(r)}).attr("cy",function(t){return m(c-t.standard)}).attr("r",r.dotRadius).attr("fill",r.colors.standard),i.selectAll("circle .done-point").data(function(){var r,a,e;for(e=[],r=0,a=t.length;a>r;r++)d=t[r],null!=d.done&&e.push(d);return e}()).enter().append("circle").attr("class","done-point").attr("cx",function(t,r){return h(r)}).attr("cy",function(t){return m(c-t.done)}).attr("r",r.dotRadius).attr("fill",r.colors.done),i.selectAll("text .done-values").data(t).enter().append("text").attr("font-size","16px").attr("class",function(t,r){return null!=t.done||0===r?t.done-t.standard>=0?"good done-values":"bad done-values":void 0}).attr("x",function(t,r){return h(r)}).attr("y",function(t){return-10+m(c-Math.min(t.standard,t.done))}).attr("fill",function(t,a){return null!=t.done||0===a?t.done-t.standard>=0?r.colors.good:r.colors.bad:void 0}).attr("text-anchor","start").text(function(t,a){var e;if(0!==a&&null!=t.done)return e=t.done-t.standard,e>=0?"+"+e.toFixed(1)+r.goodSuffix:e.toFixed(1)+r.badSuffix})};